# [834. Sum of Distances in Tree](https://leetcode.com/problems/sum-of-distances-in-tree/)


## é¢˜ç›®

An undirected, connectedÂ tree withÂ `N`Â nodes labelledÂ `0...N-1`Â andÂ `N-1edges`Â areÂ given.

TheÂ `i`th edge connects nodesÂ `edges[i][0]`Â andÂ `edges[i][1]`Â together.

Return a listÂ `ans`, whereÂ `ans[i]`Â is the sum of the distances between nodeÂ `i`and all other nodes.

**Example 1**:

    Input: N = 6, edges = [[0,1],[0,2],[2,3],[2,4],[2,5]]
    Output: [8,12,6,10,10,10]
    Explanation: 
    Here is a diagram of the given tree:
      0
     / \
    1   2
       /|\
      3 4 5
    We can see that dist(0,1) + dist(0,2) + dist(0,3) + dist(0,4) + dist(0,5)
    equals 1 + 1 + 2 + 2 + 2 = 8.  Hence, answer[0] = 8, and so on.

**Note**:Â `1 <= N <= 10000`

## é¢˜ç›®å¤§æ„

ç»™å®šä¸€ä¸ªæ— å‘ã€è¿é€šçš„æ ‘ã€‚æ ‘ä¸­æœ‰ N ä¸ªæ ‡è®°ä¸º 0...N-1 çš„èŠ‚ç‚¹ä»¥åŠ N-1Â æ¡è¾¹ã€‚ç¬¬ i æ¡è¾¹è¿æ¥èŠ‚ç‚¹Â edges[i][0] å’Œ edges[i][1]Â ã€‚è¿”å›ä¸€ä¸ªè¡¨ç¤ºèŠ‚ç‚¹ i ä¸å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹è·ç¦»ä¹‹å’Œçš„åˆ—è¡¨ ansã€‚

è¯´æ˜:Â 1 <= N <= 10000



## è§£é¢˜æ€è·¯

- ç»™å‡º N ä¸ªèŠ‚ç‚¹å’Œè¿™äº›èŠ‚ç‚¹ä¹‹é—´çš„ä¸€äº›è¾¹çš„å…³ç³»ã€‚è¦æ±‚æ±‚å‡ºåˆ†åˆ«ä»¥ x ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰èŠ‚ç‚¹è·¯å¾„å’Œã€‚
- è¿™ä¸€é¢˜è™½è¯´æè¿°çš„æ˜¯æ±‚æ ‘çš„è·¯å¾„ï¼Œä½†æ˜¯å®Œå…¨å¯ä»¥å½“åšå›¾æ¥åšï¼Œå› ä¸ºå¹¶ä¸æ˜¯äºŒå‰æ ‘ï¼Œæ˜¯å¤šå‰æ ‘ã€‚è¿™ä¸€é¢˜çš„è§£é¢˜æ€è·¯æ˜¯å…ˆä¸€æ¬¡ DFS æ±‚å‡ºä»¥ 0 ä¸ºæ ¹èŠ‚ç‚¹åˆ°å„ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å’Œ(ä¸ä»¥ 0 ä¸ºèŠ‚ç‚¹ä¹Ÿå¯ä»¥ï¼Œå¯ä»¥å–ä»»æ„èŠ‚ç‚¹ä½œä¸ºå¼€å§‹)ã€‚ç¬¬äºŒæ¬¡ DFS æ±‚å‡ºä» 0 æ ¹èŠ‚ç‚¹è½¬æ¢åˆ°å…¶ä»–å„ä¸ªèŠ‚ç‚¹çš„è·¯å¾„å’Œã€‚ç”±äºç¬¬ä¸€æ¬¡è®¡ç®—å‡ºæ¥ä»¥ 0 ä¸ºèŠ‚ç‚¹çš„è·¯å¾„å’Œæ˜¯æ­£ç¡®çš„ï¼Œæ‰€ä»¥è®¡ç®—å…¶ä»–èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„è·¯å¾„å’Œåªéœ€è¦è½¬æ¢ä¸€ä¸‹å°±å¯ä»¥å¾—åˆ°æ­£ç¡®ç»“æœã€‚ç»è¿‡ 2 æ¬¡ DFS ä¹‹åå°±å¯ä»¥å¾—åˆ°æ‰€æœ‰èŠ‚ç‚¹ä»¥è‡ªå·±ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„è·¯å¾„å’Œäº†ã€‚
- å¦‚ä½•ä»ä»¥ 0 ä¸ºæ ¹èŠ‚ç‚¹åˆ°å…¶ä»–æ‰€æœ‰èŠ‚ç‚¹çš„è·¯å¾„å’Œè½¬æ¢åˆ°ä»¥å…¶ä»–èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„è·¯å¾„å’Œå‘¢ï¼Ÿä» 0 èŠ‚ç‚¹æ¢æˆ x èŠ‚ç‚¹ï¼Œåªéœ€è¦åœ¨ 0 åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„è·¯å¾„å’ŒåŸºç¡€ä¸Šå¢å¢å‡å‡å°±å¯ä»¥äº†ã€‚å¢åŠ çš„æ˜¯ x èŠ‚ç‚¹åˆ°é™¤å»ä»¥ x ä¸ºæ ¹èŠ‚ç‚¹æ‰€æœ‰å­æ ‘ä»¥å¤–çš„èŠ‚ç‚¹çš„è·¯å¾„ï¼Œæœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹å°±å¢åŠ å¤šå°‘æ¡è·¯å¾„ã€‚å‡å°‘çš„æ˜¯ 0 åˆ°ä»¥ x ä¸ºæ ¹èŠ‚ç‚¹æ‰€æœ‰å­æ ‘èŠ‚ç‚¹çš„è·¯å¾„å’Œï¼ŒåŒ…å« 0 åˆ° x æ ¹èŠ‚ç‚¹ï¼Œæœ‰å¤šå°‘èŠ‚ç‚¹å°±å‡å°‘å¤šå°‘æ¡è·¯å¾„ã€‚æ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡ DFS ä¸­éœ€è¦è®¡ç®—å¥½æ¯ä¸ªèŠ‚ç‚¹ä»¥è‡ªå·±ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘æ€»æ•°å’Œ(åŒ…å«è‡ªå·±åœ¨å†…)ï¼Œè¿™æ ·åœ¨ç¬¬äºŒæ¬¡ DFS ä¸­å¯ä»¥ç›´æ¥æ‹¿æ¥åšè½¬æ¢ã€‚å…·ä½“ç»†èŠ‚çš„å®ç°è§ä»£ç ã€‚



## ä»£ç 

```go

package leetcode

func sumOfDistancesInTree(N int, edges [][]int) []int {
	// count[i] ä¸­å­˜å‚¨çš„æ˜¯ä»¥ i ä¸ºæ ¹èŠ‚ç‚¹ï¼Œæ‰€æœ‰å­æ ‘ç»“ç‚¹å’Œæ ¹èŠ‚ç‚¹çš„æ€»æ•°
	tree, visited, count, res := make([][]int, N), make([]bool, N), make([]int, N), make([]int, N)
	for _, e := range edges {
		i, j := e[0], e[1]
		tree[i] = append(tree[i], j)
		tree[j] = append(tree[j], i)
	}
	deepFirstSearch(0, visited, count, res, tree)
	// é‡ç½®è®¿é—®çŠ¶æ€ï¼Œå†è¿›è¡Œä¸€æ¬¡ DFS
	visited = make([]bool, N)
	// è¿›å…¥ç¬¬äºŒæ¬¡ DFS ä¹‹å‰ï¼Œåªæœ‰ res[0] é‡Œé¢å­˜çš„æ˜¯æ­£ç¡®çš„å€¼ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡ DFS è®¡ç®—å‡ºäº†ä»¥ 0 ä¸ºæ ¹èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„å’Œ
	// ç¬¬äºŒæ¬¡ DFS çš„ç›®çš„æ˜¯æŠŠä»¥ 0 ä¸ºæ ¹èŠ‚ç‚¹çš„è·¯å¾„å’Œè½¬æ¢æˆä»¥ n ä¸ºæ ¹èŠ‚ç‚¹çš„è·¯å¾„å’Œ
	deepSecondSearch(0, visited, count, res, tree)

	return res
}

func deepFirstSearch(root int, visited []bool, count, res []int, tree [][]int) {
	visited[root] = true
	for _, n := range tree[root] {
		if visited[n] {
			continue
		}
		deepFirstSearch(n, visited, count, res, tree)
		count[root] += count[n]
		// root èŠ‚ç‚¹åˆ° n çš„æ‰€æœ‰è·¯å¾„å’Œ = ä»¥ n ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å­æ ‘çš„è·¯å¾„å’Œ res[n] + root åˆ° count[n] ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸ªæ•°(root èŠ‚ç‚¹å’Œä»¥ n ä¸ºæ ¹èŠ‚ç‚¹çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¢åŠ ä¸€æ¡è·¯å¾„)
		// root èŠ‚ç‚¹å’Œä»¥ n ä¸ºæ ¹èŠ‚ç‚¹çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¢åŠ ä¸€æ¡è·¯å¾„ = ä»¥ n ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå­æ ‘èŠ‚ç‚¹æ•°å’Œæ ¹èŠ‚ç‚¹æ•°çš„æ€»å’Œï¼Œå³ count[n]
		res[root] += res[n] + count[n]
	}
	count[root]++
}

// ä» root å¼€å§‹ï¼ŒæŠŠ root èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œä¾æ¬¡è®¾ç½®æˆæ–°çš„æ ¹èŠ‚ç‚¹
func deepSecondSearch(root int, visited []bool, count, res []int, tree [][]int) {
	N := len(visited)
	visited[root] = true
	for _, n := range tree[root] {
		if visited[n] {
			continue
		}
		// æ ¹èŠ‚ç‚¹ä» root å˜æˆ n å
		// res[root] å­˜å‚¨çš„æ˜¯ä»¥ root ä¸ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰èŠ‚ç‚¹çš„è·¯å¾„æ€»é•¿åº¦
		// 1. root åˆ° n èŠ‚ç‚¹å¢åŠ çš„è·¯å¾„é•¿åº¦ = root èŠ‚ç‚¹å’Œä»¥ n ä¸ºæ ¹èŠ‚ç‚¹çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¢åŠ ä¸€æ¡è·¯å¾„ = ä»¥ n ä¸ºæ ¹èŠ‚ç‚¹ï¼Œå­æ ‘èŠ‚ç‚¹æ•°å’Œæ ¹èŠ‚ç‚¹æ•°çš„æ€»å’Œï¼Œå³ count[n]
		// 2. n åˆ°ä»¥ n ä¸ºæ ¹èŠ‚ç‚¹çš„æ‰€æœ‰å­æ ‘èŠ‚ç‚¹ä»¥å¤–çš„èŠ‚ç‚¹å¢åŠ çš„è·¯å¾„é•¿åº¦ = n èŠ‚ç‚¹å’Œé n ä¸ºæ ¹èŠ‚ç‚¹å­æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½å¢åŠ ä¸€æ¡è·¯å¾„ = N - count[n]
		// æ‰€ä»¥æŠŠæ ¹èŠ‚ç‚¹ä» root è½¬ç§»åˆ° nï¼Œéœ€è¦å¢åŠ çš„è·¯å¾„æ˜¯ä¸Šé¢ğŸ‘†ç¬¬äºŒæ­¥è®¡ç®—çš„ï¼Œéœ€è¦å‡å°‘çš„è·¯å¾„æ˜¯ä¸Šé¢ğŸ‘†ç¬¬ä¸€æ­¥è®¡ç®—çš„
		res[n] = res[root] + (N - count[n]) - count[n]
		deepSecondSearch(n, visited, count, res, tree)
	}
}

```